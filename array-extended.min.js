/*! array-extended - v0.0.1 - 2013-01-14
* Copyright (c) 2013 Doug Martin; Licensed MIT */
(function(){"use strict";function t(t,n){return n=n||0,e.call(t,n)}function n(e,n){function l(e,t){return S(t,function(t,n){return i(n)||(n=[n]),n.unshift(e),t.unshift(n),t},[])}function c(e,t,n){var r=[];for(var i=0;i<t.length;i++)r.push([e].concat(_(t,i)).slice(0,n));return r}function h(e,t){var n=[],r;if(i(e)&&i(t)&&e.length&&t.length)for(var s=0,o=e.length;s<o;s++)r=e[s],d(t,r)!==-1&&n.push(r);return n}function d(e,t){if(!i(e))throw new TypeError;var n=Object(e),r=n.length>>>0;if(r===0)return-1;var s=0;arguments.length>2&&(s=Number(arguments[2]),s!==s?s=0:s!==0&&s!==Infinity&&s!==-Infinity&&(s=(s>0||-1)*o(u(s))));if(s>=r)return-1;var f=s>=0?s:a(r-u(s),0);for(;f<r;f++)if(f in n&&n[f]===t)return f;return-1}function v(e,t){if(!i(e))throw new TypeError;var n=Object(e),r=n.length>>>0;if(r===0)return-1;var s=r;arguments.length>2&&(s=Number(arguments[2]),s!==s?s=0:s!==0&&s!==1/0&&s!==-1/0&&(s=(s>0||-1)*o(u(s))));var a=s>=0?f(s,r-1):r-u(s);for(;a>=0;a--)if(a in n&&n[a]===t)return a;return-1}function m(e,t,n){if(!i(e)||typeof t!="function")throw new TypeError;var r=Object(e),s=r.length>>>0,o=[];for(var u=0;u<s;u++)if(u in r){var a=r[u];t.call(n,a,u,r)&&o.push(a)}return o}function g(e,t,n){if(!i(e)||typeof t!="function")throw new TypeError;for(var r=0,s=e.length;r<s;++r)t.call(n||e,e[r],r,e);return e}function y(e,t,n){if(!i(e)||typeof t!="function")throw new TypeError;var r=Object(e),s=r.length>>>0;for(var o=0;o<s;o++)if(o in r&&!t.call(n,r[o],o,r))return!1;return!0}function b(e,t,n){if(!i(e)||typeof t!="function")throw new TypeError;var r=Object(e),s=r.length>>>0;for(var o=0;o<s;o++)if(o in r&&t.call(n,r[o],o,r))return!0;return!1}function w(e,t,n){if(!i(e)||typeof t!="function")throw new TypeError;var r=Object(e),s=r.length>>>0,o=[];for(var u=0;u<s;u++)u in r&&o.push(t.call(n,r[u],u,r));return o}function E(e,t,n){if(!i(e)||typeof t!="function")throw new TypeError;var r=0,s=e.length>>0;if(arguments.length<3){if(s===0)throw new TypeError("Array length is 0 and no second argument");n=e[0],r=1}else n=arguments[2];while(r<s)r in e&&(n=t.call(undefined,n,e[r],r,e)),++r;return n}function S(e,t,n){if(!i(e)||typeof t!="function")throw new TypeError;var r=Object(e),s=r.length>>>0;if(s===0&&arguments.length===2)throw new TypeError;var o=s-1;if(arguments.length>=3)n=arguments[2];else do if(o in e){n=e[o--];break}while(!0);while(o>=0)o in r&&(n=t.call(undefined,n,r[o],o,r)),o--;return n}function x(e){var r=[];if(e!==null){var s=t(arguments);if(s.length===1)if(i(e))r=e;else if(n.isHash(e))for(var o in e)e.hasOwnProperty(o)&&r.push([o,e[o]]);else r.push(e);else g(s,function(e){r=r.concat(x(e))})}return r}function T(e){return e=e||[],e.length?E(e,function(e,t){return e+t}):0}function N(e){e=e||[];if(e.length){var t=T(e);if(n.isNumber(t))return t/e.length;throw new Error("Cannot average an array of non numbers.")}return 0}function C(e,t){return p(e,t)}function k(e,t){return p(e,t)[0]}function L(e,t){return p(e,t)[e.length-1]}function A(e,n){var r=e,s=z(t(arguments,1));return i(e)&&(r=m(e,function(e){return d(s,e)===-1})),r}function O(e){if(i(e))return E(e,function(e,t){return d(e,t)===-1?e.concat(t):e},[])}function M(e){return O(e)}function _(e,t){var n=e.slice();return typeof t!="number"&&(t=1),t&&i(e)?(t>0?(n.push(n.shift()),t--):(n.unshift(n.pop()),t++),_(n,t)):n}function D(e,t){var n=[];if(i(e)){var r=e.slice(0);typeof t!="number"&&(t=e.length),t?t<=e.length&&(n=E(e,function(e,n,i){var s;return t>1?s=c(n,_(r,i).slice(1),t):s=[[n]],e.concat(s)},[])):n=[[]]}return n}function P(){var e=[],r=t(arguments);if(r.length>1){var s=r.shift();i(s)&&(e=E(s,function(e,t,s){var o=[t];for(var u=0;u<r.length;u++){var a=r[u];i(a)&&!n.isUndefined(a[s])?o.push(a[s]):o.push(null)}return e.push(o),e},[]))}return e}function H(e){var t=[];if(i(e)&&e.length){var n;g(e,function(e){i(e)&&(!n||e.length===n.length)&&(g(e,function(e,n){t[n]||(t[n]=[]),t[n].push(e)}),n=e)})}return t}function B(e,n){var r=[];n=t(arguments),e=n.shift();var s=e.length;if(i(e)&&n.length)for(var o=0;o<n.length;o++)r.push(e[n[o]]||null);return r}function j(){var e=[],n=t(arguments);return n.length>1&&(e=O(E(n,function(e,t){return e.concat(t)},[]))),e}function F(e,n){var r=[],s,o=t(arguments);o.length>1?s=o:s=o[0];if(i(s)){var u=s.shift();r=E(s,function(e,t){return h(e,t)},u)}return O(r)}function I(e){var t=[];return i(e)&&e.length&&(t=E(e,function(e,t){var n=w(e,function(e){return e.concat(t)});return e.concat(n)},[[]])),t}function q(e,t){var n=[];return i(e)&&i(t)&&e.length&&t.length&&(n=l(e[0],t).concat(q(e.slice(1),t))),n}function R(e){var t=[];return i(e)&&e.length&&(t=m(e,function(e){return!n.isUndefinedOrNull(e)})),t}function U(e,t){t=n.isNumber(t)?t:1,t||(t=1),e=x(e||[]);var r=[],i=0;while(++i<=t)r=r.concat(e);return r}function z(e){var n,r=t(arguments);return r.length>1?n=r:n=x(e),E(n,function(e,t){return e.concat(t)},[])}function W(e,t){t=t.split(".");var n=e.slice(0);return g(t,function(e){var t=e.match(/(\w+)\(\)$/);n=w(n,function(n){return t?n[t[1]]():n[e]})}),n}function X(e,n,i){return i=t(arguments,2),w(e,function(e){var t=r(n)?e[n]:n;return t.apply(e,i)})}var r=n.isString,i=n.isArray,s=n.isDate,o=Math.floor,u=Math.abs,a=Math.max,f=Math.min,p=function(){var e=function(e,t){return y(e,t)},t=function(e,t){return e-t},n=function(e,t){return e.getTime()-t.getTime()};return function(u,a){var f=[];return i(u)&&(f=u.slice(),a?typeof a=="function"?f.sort(a):f.sort(function(e,t){var n=e[a],i=t[a];return r(n)&&r(i)?n>i?1:n<i?-1:0:s(n)&&s(i)?n.getTime()-i.getTime():n-i}):e(f,r)?f.sort():e(f,s)?f.sort(n):f.sort(t)),f}}(),V={toArray:x,sum:T,avg:N,sort:C,min:k,max:L,difference:A,removeDuplicates:O,unique:M,rotate:_,permutations:D,zip:P,transpose:H,valuesAt:B,union:j,intersect:F,powerSet:I,cartesian:q,compact:R,multiply:U,flatten:z,pluck:W,invoke:X,forEach:g,map:w,filter:m,reduce:E,reduceRight:S,some:b,every:y,indexOf:d,lastIndexOf:v};return e.define(i,V).expose(V)}var e=Array.prototype.slice;"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports&&(module.exports=n(require("extender"),require("is-extended"))):"function"==typeof define?define(["require"],function(e){return n(e("extender"),e("is-extended"))}):this.arrayExtended=n(extender,isExtended)}).call(this);