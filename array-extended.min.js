/*! array-extended - v0.0.7 - 2013-06-06
* Copyright (c) 2013 Doug Martin; Licensed MIT */
(function(){"use strict";function r(r,n){return n=n||0,e.call(r,n)}function n(n,e){function t(r,n){return v(n,function(n,e){return P(e)||(e=[e]),e.unshift(r),n.unshift(e),n},[])}function u(r,n,e){for(var t=[],u=0;n.length>u;u++)t.push([r].concat(O(n,u)).slice(0,e));return t}function i(r,n){var e,t=[];if(r&&n&&r.length&&n.length)for(var u=0,i=r.length;i>u;u++)e=r[u],-1!==o(n,e)&&t.push(e);return t}function o(r,n,e){for(var t=(e||0)-1,u=r.length;u>++t;)if(r[t]===n)return t;return-1}function f(r,n){if(!P(r))throw new TypeError;var e=Object(r),t=e.length>>>0;if(0===t)return-1;var u=t;arguments.length>2&&(u=Number(arguments[2]),u!==u?u=0:0!==u&&u!==1/0&&u!==-(1/0)&&(u=(u>0||-1)*B(F(u))));for(var i=u>=0?G(u,t-1):t-F(u);i>=0;i--)if(i in e&&e[i]===n)return i;return-1}function a(r,n,e){if(r&&W&&W===r.filter)return r.filter(n,e);if(!P(r)||"function"!=typeof n)throw new TypeError;for(var t=Object(r),u=t.length>>>0,i=[],o=0;u>o;o++)if(o in t){var f=t[o];n.call(e,f,o,t)&&i.push(f)}return i}function c(r,n,e){if(!P(r)||"function"!=typeof n)throw new TypeError;if(r&&K&&K===r.forEach)return r.forEach(n,e),r;for(var t=0,u=r.length;u>t;++t)n.call(e||r,r[t],t,r);return r}function l(r,n,e){if(r&&X&&X===r.every)return r.every(n,e);if(!P(r)||"function"!=typeof n)throw new TypeError;for(var t=Object(r),u=t.length>>>0,i=0;u>i;i++)if(i in t&&!n.call(e,t[i],i,t))return!1;return!0}function s(r,n,e){if(r&&Y&&Y===r.some)return r.some(n,e);if(!P(r)||"function"!=typeof n)throw new TypeError;for(var t=Object(r),u=t.length>>>0,i=0;u>i;i++)if(i in t&&n.call(e,t[i],i,t))return!0;return!1}function h(r,n,e){if(r&&L&&L===r.map)return r.map(n,e);if(!P(r)||"function"!=typeof n)throw new TypeError;for(var t=Object(r),u=t.length>>>0,i=[],o=0;u>o;o++)o in t&&i.push(n.call(e,t[o],o,t));return i}function g(r,n,e){var t=arguments.length>2;if(r&&Q&&Q===r.reduce)return t?r.reduce(n,e):r.reduce(n);if(!P(r)||"function"!=typeof n)throw new TypeError;var u=0,i=r.length>>0;if(3>arguments.length){if(0===i)throw new TypeError("Array length is 0 and no second argument");e=r[0],u=1}else e=arguments[2];for(;i>u;)u in r&&(e=n.call(void 0,e,r[u],u,r)),++u;return e}function v(r,n,e){var t=arguments.length>2;if(r&&V&&V===r.reduceRight)return t?r.reduceRight(n,e):r.reduceRight(n);if(!P(r)||"function"!=typeof n)throw new TypeError;var u=Object(r),i=u.length>>>0;if(0===i&&2===arguments.length)throw new TypeError;var o=i-1;if(arguments.length>=3)e=arguments[2];else for(;;)if(o in r){e=r[o--];break}for(;o>=0;)o in u&&(e=n.call(void 0,e,u[o],o,u)),o--;return e}function p(n){var t=[];if(null!==n){var u=r(arguments);if(1===u.length)if(P(n))t=n;else if(e.isHash(n))for(var i in n)n.hasOwnProperty(i)&&t.push([i,n[i]]);else t.push(n);else c(u,function(r){t=t.concat(p(r))})}return t}function m(r){return r=r||[],r.length?g(r,function(r,n){return r+n}):0}function d(r){if(r=r||[],r.length){var n=m(r);if(e.isNumber(n))return n/r.length;throw Error("Cannot average an array of non numbers.")}return 0}function y(r,n){return Z(r,n)}function w(r,n){return Z(r,n)[0]}function E(r,n){return Z(r,n)[r.length-1]}function x(n){var e=n,t=z(r(arguments,1));return P(n)&&(e=a(n,function(r){return-1===o(t,r)})),e}function b(r){var n=[];if(P(r))for(var e=0,t=r.length;t>e;e++){var u=r[e];-1===o(n,u)&&n.push(u)}return n}function T(r){return b(r)}function O(r,n){var e=r.slice();return"number"!=typeof n&&(n=1),n&&P(r)?(n>0?(e.push(e.shift()),n--):(e.unshift(e.pop()),n++),O(e,n)):e}function A(r,n){var e=[];if(P(r)){var t=r.slice(0);"number"!=typeof n&&(n=r.length),n?r.length>=n&&(e=g(r,function(r,e,i){var o;return o=n>1?u(e,O(t,i).slice(1),n):[[e]],r.concat(o)},[])):e=[[]]}return e}function j(){var n=[],t=r(arguments);if(t.length>1){var u=t.shift();P(u)&&(n=g(u,function(r,n,u){for(var i=[n],o=0;t.length>o;o++){var f=t[o];P(f)&&!e.isUndefined(f[u])?i.push(f[u]):i.push(null)}return r.push(i),r},[]))}return n}function R(r){var n=[];if(P(r)&&r.length){var e;c(r,function(r){!P(r)||e&&r.length!==e.length||(c(r,function(r,e){n[e]||(n[e]=[]),n[e].push(r)}),e=r)})}return n}function M(n,e){var t=[];if(e=r(arguments),n=e.shift(),P(n)&&e.length)for(var u=0,i=e.length;i>u;u++)t.push(n[e[u]]||null);return t}function N(){var n=[],e=r(arguments);if(e.length>1){for(var t=0,u=e.length;u>t;t++)n=n.concat(e[t]);n=b(n)}return n}function k(){var n,e=[],t=r(arguments);if(n=t.length>1?t:t[0],P(n)){e=n.shift();for(var u=0,o=n.length;o>u;u++)e=i(e,n[u])}return b(e)}function q(r){var n=[];return P(r)&&r.length&&(n=g(r,function(r,n){var e=h(r,function(r){return r.concat(n)});return r.concat(e)},[[]])),n}function D(r,n){var e=[];return P(r)&&P(n)&&r.length&&n.length&&(e=t(r[0],n).concat(D(r.slice(1),n))),e}function S(r){var n=[];return P(r)&&r.length&&(n=a(r,function(r){return!e.isUndefinedOrNull(r)})),n}function U(r,n){n=e.isNumber(n)?n:1,n||(n=1),r=p(r||[]);for(var t=[],u=0;n>=++u;)t=t.concat(r);return t}function z(n){var e,t=r(arguments);return e=t.length>1?t:p(n),g(e,function(r,n){return r.concat(n)},[])}function C(r,n){n=n.split(".");var e=r.slice(0);return c(n,function(r){var n=r.match(/(\w+)\(\)$/);e=h(e,function(e){return n?e[n[1]]():e[r]})}),e}function H(n,e,t){return t=r(arguments,2),h(n,function(r){var n=I(e)?r[e]:e;return n.apply(r,t)})}var I=e.isString,P=Array.isArray||e.isArray,$=e.isDate,B=Math.floor,F=Math.abs,G=(Math.max,Math.min),J=Array.prototype,K=(J.indexOf,J.forEach),L=J.map,Q=J.reduce,V=J.reduceRight,W=J.filter,X=J.every,Y=J.some,Z=function(){var r=function(r,n){return l(r,n)},n=function(r,n){return r-n},e=function(r,n){return r.getTime()-n.getTime()};return function(t,u){var i=[];return P(t)&&(i=t.slice(),u?"function"==typeof u?i.sort(u):i.sort(function(r,n){var e=r[u],t=n[u];return I(e)&&I(t)?e>t?1:t>e?-1:0:$(e)&&$(t)?e.getTime()-t.getTime():e-t}):r(i,I)?i.sort():r(i,$)?i.sort(e):i.sort(n)),i}}(),_={toArray:p,sum:m,avg:d,sort:y,min:w,max:E,difference:x,removeDuplicates:b,unique:T,rotate:O,permutations:A,zip:j,transpose:R,valuesAt:M,union:N,intersect:k,powerSet:q,cartesian:D,compact:S,multiply:U,flatten:z,pluck:C,invoke:H,forEach:c,map:h,filter:a,reduce:g,reduceRight:v,some:s,every:l,indexOf:o,lastIndexOf:f};return n.define(P,_).expose(_)}var e=Array.prototype.slice;"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports&&(module.exports=n(require("extended"),require("is-extended"))):"function"==typeof define&&define.amd?define(["extended","is-extended"],function(r,e){return n(r,e)}):this.arrayExtended=n(this.extended,this.isExtended)}).call(this);